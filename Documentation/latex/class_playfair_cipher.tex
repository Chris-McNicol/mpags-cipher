\hypertarget{class_playfair_cipher}{\section{Playfair\-Cipher Class Reference}
\label{class_playfair_cipher}\index{Playfair\-Cipher@{Playfair\-Cipher}}
}


{\ttfamily \#include $<$Playfair\-Cipher.\-hpp$>$}

\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{class_playfair_cipher_a9547df4c76d947519d30355de7f00735}{Playfair\-Cipher} (std\-::string constructorkey, Cipher\-Mode mode)
\item 
void \hyperlink{class_playfair_cipher_a2c2d8f6b505f0d96cbff8124bcc00cc4}{set\-Key} (std\-::string key\-To\-Set)
\begin{DoxyCompactList}\small\item\em Creates the mapping from the keyword. \end{DoxyCompactList}\item 
int \hyperlink{class_playfair_cipher_aa16404acec63246dce3b30ea9dacb4cb}{play\-Wrap} (int index)
\begin{DoxyCompactList}\small\item\em A helper function to ensure coordinates are in the 5x5 square. \end{DoxyCompactList}\item 
\hypertarget{class_playfair_cipher_a7480bb24983949eb1e8d6ae5dec69c42}{void \hyperlink{class_playfair_cipher_a7480bb24983949eb1e8d6ae5dec69c42}{make\-It\-Look\-Nice} (std\-::string \&msg)}\label{class_playfair_cipher_a7480bb24983949eb1e8d6ae5dec69c42}

\begin{DoxyCompactList}\small\item\em A function which takes a decrypted message and removes the added 'X's and 'Z's. \end{DoxyCompactList}\item 
std\-::string \hyperlink{class_playfair_cipher_acd6697e3623547fc63332f148c49f2c6}{encrypt} (std\-::string msg)
\end{DoxyCompactItemize}
\subsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
std\-::map$<$ char, std\-::pair$<$ int, \\*
int $>$ $>$ \hyperlink{class_playfair_cipher_a3171ced3a7a56d8fcf57e99d760db715}{str2int\-Map}
\item 
std\-::map$<$ std\-::pair$<$ int, int $>$\\*
, char $>$ \hyperlink{class_playfair_cipher_ac02d4eb28101423fe0b9b5313c0b9cd5}{int2str\-Map}
\end{DoxyCompactItemize}


\subsection{Detailed Description}
Playfair\-Caesar\-Cipher contains the a mapping of characters to coordinates and vice-\/versa, the key of the cipher and a flag for decryption 

\subsection{Constructor \& Destructor Documentation}
\hypertarget{class_playfair_cipher_a9547df4c76d947519d30355de7f00735}{\index{Playfair\-Cipher@{Playfair\-Cipher}!Playfair\-Cipher@{Playfair\-Cipher}}
\index{Playfair\-Cipher@{Playfair\-Cipher}!PlayfairCipher@{Playfair\-Cipher}}
\subsubsection[{Playfair\-Cipher}]{\setlength{\rightskip}{0pt plus 5cm}Playfair\-Cipher\-::\-Playfair\-Cipher (
\begin{DoxyParamCaption}
\item[{std\-::string}]{constructorkey, }
\item[{Cipher\-Mode}]{mode}
\end{DoxyParamCaption}
)}}\label{class_playfair_cipher_a9547df4c76d947519d30355de7f00735}
Create a new \hyperlink{class_playfair_cipher}{Playfair\-Cipher}


\begin{DoxyParams}{Parameters}
{\em constructorkey} & the key to the cipher. \\
\hline
{\em mode} & whether to 'Encrypt' or 'Decrypt' \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
13   :key\_\{thekey\},mode\_\{decrypt\_mode\}
14    \{
15      \hyperlink{class_playfair_cipher_a2c2d8f6b505f0d96cbff8124bcc00cc4}{setKey}(thekey);
16        \}
\end{DoxyCode}


\subsection{Member Function Documentation}
\hypertarget{class_playfair_cipher_acd6697e3623547fc63332f148c49f2c6}{\index{Playfair\-Cipher@{Playfair\-Cipher}!encrypt@{encrypt}}
\index{encrypt@{encrypt}!PlayfairCipher@{Playfair\-Cipher}}
\subsubsection[{encrypt}]{\setlength{\rightskip}{0pt plus 5cm}std\-::string Playfair\-Cipher\-::encrypt (
\begin{DoxyParamCaption}
\item[{std\-::string}]{msg}
\end{DoxyParamCaption}
)}}\label{class_playfair_cipher_acd6697e3623547fc63332f148c49f2c6}
\begin{DoxyReturn}{Returns}
the encrypted/decrypted string 
\end{DoxyReturn}

\begin{DoxyParams}{Parameters}
{\em msg} & the message to be used \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
109                                               \{
110 
111   std::string digraph\{\textcolor{stringliteral}{""}\};
112   std::string returntext;
113   std::string encrypteddigraph\{\textcolor{stringliteral}{""}\};
114 
115   std::pair<int,int> coord1;
116   std::pair<int,int> coord2;
117 
118   std::pair<int,int> encryptcoord1;
119   std::pair<int,int> encryptcoord2;
120   
121 
122   \textcolor{keywordtype}{int} shifter\{\};
123   \textcolor{keywordflow}{if} (mode\_ == CipherMode::Encrypt)\{ shifter = 1; \}
124   \textcolor{keywordflow}{if} (mode\_ ==CipherMode::Decrypt)\{ shifter = -1; \}
125   
126 
127   
128 
129   \textcolor{comment}{//Make sure input is valid}
130   \textcolor{comment}{//Upper case, only chars and J-> I}
131 
132 
133 
134 
135 
136 
137   \textcolor{comment}{//Find repeated chars and add an X}
138 
139   \textcolor{keywordflow}{if}(mode\_ == CipherMode::Encrypt)\{
140   
141   \textcolor{keywordflow}{for}(\textcolor{keywordtype}{size\_t} foo\{0\} ; foo < msg.length() - 1; ++foo)\{
142 
143     \textcolor{keywordflow}{if} (msg[foo] == msg[foo+1])\{
144       msg.insert(foo+1, \textcolor{stringliteral}{"X"});
145     \}
146   \}
147 
148   \textcolor{comment}{//If the size is odd, add a trailing Z}
149 
150   \textcolor{keywordflow}{if}((msg.length())%2 != 0)\{ msg+=\textcolor{stringliteral}{"Z"};\}
151   \}
152 
153   
154   \textcolor{comment}{//Loop over the input in Digraphs}
155 
156     \textcolor{keywordflow}{for}(\textcolor{keywordtype}{size\_t} brum=0; brum < msg.length() -1; brum+=2)\{
157       digraph = \textcolor{stringliteral}{""};
158       encrypteddigraph = \textcolor{stringliteral}{""};
159       digraph += msg[brum];
160       digraph += msg[brum+1];
161 
162       
163 
164       \textcolor{comment}{//Find the coords for the digraph}
165       
166       \textcolor{keyword}{auto} coord1iter = \hyperlink{class_playfair_cipher_a3171ced3a7a56d8fcf57e99d760db715}{str2intMap}.find(digraph[0]);
167       \textcolor{keyword}{auto} coord2iter = \hyperlink{class_playfair_cipher_a3171ced3a7a56d8fcf57e99d760db715}{str2intMap}.find(digraph[1]);
168 
169       coord1 = (*coord1iter).second;
170       coord2 = (*coord2iter).second;
171  
172      
173   \textcolor{comment}{//For each Digraph, decide how to encrypt}
174 
175       \textcolor{comment}{//same row}
176       \textcolor{keywordflow}{if}( coord1.first == coord2.first)\{
177     
178 
179     
180     encryptcoord1 = std::make\_pair(coord1.first, \hyperlink{class_playfair_cipher_aa16404acec63246dce3b30ea9dacb4cb}{playWrap}(coord1.second +shifter));
181     encryptcoord2 = std::make\_pair(coord2.first, \hyperlink{class_playfair_cipher_aa16404acec63246dce3b30ea9dacb4cb}{playWrap}(coord2.second +shifter));
182       \}
183 
184       \textcolor{comment}{//same column}
185       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}( coord1.second == coord2.second)\{
186     
187     encryptcoord1 = std::make\_pair(\hyperlink{class_playfair_cipher_aa16404acec63246dce3b30ea9dacb4cb}{playWrap}(coord1.first + shifter), coord1.second);
188     encryptcoord2 = std::make\_pair(\hyperlink{class_playfair_cipher_aa16404acec63246dce3b30ea9dacb4cb}{playWrap}(coord2.first + shifter), coord2.second);
189       \}
190 
191       \textcolor{comment}{//else rectangle -> swap column coords}
192       \textcolor{keywordflow}{else}\{
193     
194     encryptcoord1 = std::make\_pair(coord1.first,coord2.second);
195     encryptcoord2 = std::make\_pair(coord2.first,coord1.second);
196       \}
197 
198       encrypteddigraph += (*\hyperlink{class_playfair_cipher_ac02d4eb28101423fe0b9b5313c0b9cd5}{int2strMap}.find(encryptcoord1)).second;
199       encrypteddigraph += (*\hyperlink{class_playfair_cipher_ac02d4eb28101423fe0b9b5313c0b9cd5}{int2strMap}.find(encryptcoord2)).second;
200      
201     returntext+=encrypteddigraph;
202     \}
203   \textcolor{comment}{//return the text}
204   
205   \textcolor{keywordflow}{return} returntext;
206 
207  
208    \}
\end{DoxyCode}
\hypertarget{class_playfair_cipher_aa16404acec63246dce3b30ea9dacb4cb}{\index{Playfair\-Cipher@{Playfair\-Cipher}!play\-Wrap@{play\-Wrap}}
\index{play\-Wrap@{play\-Wrap}!PlayfairCipher@{Playfair\-Cipher}}
\subsubsection[{play\-Wrap}]{\setlength{\rightskip}{0pt plus 5cm}int Playfair\-Cipher\-::play\-Wrap (
\begin{DoxyParamCaption}
\item[{int}]{index}
\end{DoxyParamCaption}
)}}\label{class_playfair_cipher_aa16404acec63246dce3b30ea9dacb4cb}


A helper function to ensure coordinates are in the 5x5 square. 


\begin{DoxyParams}{Parameters}
{\em index} & the index to be wrapped \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
102                                      \{
103 
104   \textcolor{keywordflow}{if} ( index > 4)\{index -= 5;\}
105   \textcolor{keywordflow}{if} ( index < 0)\{index += 5;\}
106   \textcolor{keywordflow}{return} index;\}
\end{DoxyCode}
\hypertarget{class_playfair_cipher_a2c2d8f6b505f0d96cbff8124bcc00cc4}{\index{Playfair\-Cipher@{Playfair\-Cipher}!set\-Key@{set\-Key}}
\index{set\-Key@{set\-Key}!PlayfairCipher@{Playfair\-Cipher}}
\subsubsection[{set\-Key}]{\setlength{\rightskip}{0pt plus 5cm}void Playfair\-Cipher\-::set\-Key (
\begin{DoxyParamCaption}
\item[{std\-::string}]{key\-To\-Set}
\end{DoxyParamCaption}
)}}\label{class_playfair_cipher_a2c2d8f6b505f0d96cbff8124bcc00cc4}


Creates the mapping from the keyword. 


\begin{DoxyParams}{Parameters}
{\em key\-To\-Set} & the keyword \\
\hline
\end{DoxyParams}

\begin{DoxyCode}
19                                              \{
20 
21  
22   std::string temp;
23   \textcolor{comment}{// store the original key}
24   key\_ = keyToSet;
25 
26   \textcolor{comment}{//Append the alphabet}
27   temp = keyToSet;
28   std::string alphabet = \textcolor{stringliteral}{"ABCDEFGHIJKLMNOPQRSTUVWXYZ"};
29   temp += alphabet;
30 
31   \textcolor{comment}{//Make sure the key is uppercase}
32   std::transform(temp.begin(), temp.end(), temp.begin(), toupper);
33   
34   \textcolor{comment}{//Remove non-alpha characters}
35  
36   \textcolor{keyword}{auto} func = [] (\textcolor{keywordtype}{char} c)\{
37     \textcolor{keywordflow}{return} (! isalpha(c));\};
38   
39   \textcolor{keyword}{auto} iter(std::remove\_if( temp.begin(), temp.end(), func));
40 
41 
42  temp.erase(iter, temp.end());
43 
44 
45   \textcolor{comment}{//Change J-> I}
46 
47   \textcolor{keyword}{auto} jehova = [] (\textcolor{keywordtype}{char} b)\{
48     \textcolor{keywordflow}{if}( b == \textcolor{charliteral}{'J'})\{ \textcolor{keywordflow}{return} \textcolor{charliteral}{'I'};\}
49     \textcolor{keywordflow}{else} \{\textcolor{keywordflow}{return} b;\}
50   \};
51 
52   std::transform(temp.begin(), temp.end(), temp.begin(), jehova);
53   
54 
55   \textcolor{comment}{//Remove duplicated letters}
56 std::string encountered;
57 \textcolor{keyword}{auto} close\_encounters = [&] (\textcolor{keywordtype}{char} f)\{
58   \textcolor{keyword}{auto} iter2(std::find(encountered.begin(), encountered.end(), f));
59          \textcolor{keywordflow}{if}( iter2 == encountered.end())\{
60            encountered.push\_back(f);
61            \textcolor{keywordflow}{return} \textcolor{keyword}{false};\}
62          \textcolor{keywordflow}{else} \{\textcolor{keywordflow}{return} \textcolor{keyword}{true};\}
63          \};
64 
65   \textcolor{keyword}{auto} iter3(std::remove\_if (temp.begin(), temp.end(), close\_encounters));
66   temp.erase(iter3, temp.end());
67   
68 
69   
70 
71   \textcolor{comment}{// Store the coords of each letter}
72 
73    \textcolor{keywordtype}{int} row;
74   \textcolor{keywordtype}{int} column;
75   \textcolor{keywordtype}{int} place;
76   std::pair<int,int> p1;
77   std::pair<char, std::pair<int,int>> s2ipair;
78   std::pair<std::pair<int,int>, \textcolor{keywordtype}{char}> i2spair;
79   
80   \textcolor{keywordflow}{for}(\textcolor{keywordtype}{char} x : alphabet)\{
81     \textcolor{keyword}{auto} iter4(std::find(temp.begin(), temp.end(), x));
82     \textcolor{keywordflow}{if} (iter4 != temp.end())\{
83       place = std::distance(temp.begin(),iter4);
84       row = (int)place/5;
85       column = place%5;
86       p1 = std::make\_pair(row,column);
87       s2ipair = std::make\_pair(x,p1);
88       i2spair = std::make\_pair(p1,x);
89 
90       \hyperlink{class_playfair_cipher_a3171ced3a7a56d8fcf57e99d760db715}{str2intMap}.insert(s2ipair);
91       \hyperlink{class_playfair_cipher_ac02d4eb28101423fe0b9b5313c0b9cd5}{int2strMap}.insert(i2spair);
92     \}
93   \}
94 
95   
96 
97   \textcolor{comment}{//Store the playfair cipher key map}
98 
99  
100 \}
\end{DoxyCode}


\subsection{Member Data Documentation}
\hypertarget{class_playfair_cipher_ac02d4eb28101423fe0b9b5313c0b9cd5}{\index{Playfair\-Cipher@{Playfair\-Cipher}!int2str\-Map@{int2str\-Map}}
\index{int2str\-Map@{int2str\-Map}!PlayfairCipher@{Playfair\-Cipher}}
\subsubsection[{int2str\-Map}]{\setlength{\rightskip}{0pt plus 5cm}std\-::map$<$std\-::pair$<$int,int$>$,char$>$ Playfair\-Cipher\-::int2str\-Map}}\label{class_playfair_cipher_ac02d4eb28101423fe0b9b5313c0b9cd5}

\begin{DoxyParams}{Parameters}
{\em int2str\-Map} & mapping of coordinates to character \\
\hline
\end{DoxyParams}
\hypertarget{class_playfair_cipher_a3171ced3a7a56d8fcf57e99d760db715}{\index{Playfair\-Cipher@{Playfair\-Cipher}!str2int\-Map@{str2int\-Map}}
\index{str2int\-Map@{str2int\-Map}!PlayfairCipher@{Playfair\-Cipher}}
\subsubsection[{str2int\-Map}]{\setlength{\rightskip}{0pt plus 5cm}std\-::map$<$char, std\-::pair$<$int,int$>$ $>$ Playfair\-Cipher\-::str2int\-Map}}\label{class_playfair_cipher_a3171ced3a7a56d8fcf57e99d760db715}

\begin{DoxyParams}{Parameters}
{\em str2int\-Map} & mapping of character to coordinates \\
\hline
\end{DoxyParams}


The documentation for this class was generated from the following files\-:\begin{DoxyCompactItemize}
\item 
M\-P\-A\-G\-S\-Cipher/Playfair\-Cipher.\-hpp\item 
M\-P\-A\-G\-S\-Cipher/Playfair\-Cipher.\-cpp\end{DoxyCompactItemize}
